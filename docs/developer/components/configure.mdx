---
title: 'Configure'
date: 2024-04-19T11:00:00+00:00
sidebar_position: 3
draft: false
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

Components can be passed a list of configuration at runtime to use when executing. This configuration should first be defined using [wash](/docs/ecosystem/wash/) or as a part of your [wadm](/docs/ecosystem/wadm/) manifest, and then fetched using the `wasi:config/runtime` interface.

## Define Configuration

<Tabs groupId="tool" queryString>
    <TabItem value="wadm" label="wadm" default>

If you're using [wadm](/docs/ecosystem/wadm/) to declaratively define applications, you can use the `config` field to define configuration for your component. Wadm will automatically manage creating the configuration for you and supplying it to the component at runtime.

```yaml
apiVersion: core.oam.dev/v1beta1
kind: Application
metadata:
  name: hello-world
  annotations:
    version: v0.0.1
    description: 'Component that uses wasi:http and wasi:config/runtime'
spec:
  components:
    - name: http-component
      type: component
      properties:
        image: file://./build/http_hello_world_s.wasm
        config: # [!code ++]
          - name: custom-config # [!code ++]
            properties: # [!code ++]
              foo: bar # [!code ++]
              log-level: debug # [!code ++]
      traits:
        # Govern the spread/scheduling of the component
        - type: spreadscaler
          properties:
            replicas: 1
```

    </TabItem>
    <TabItem value="wash" label="wash">

If you're using [wash](/docs/ecosystem/wash/) to imperatively start your component, you can first define configuration using the `wash config` subcommand, and then supply it alongside your component.

```bash
# wash config put <config-name> <values...>
wash config put custom-config foo=bar log-level=debug
```

Then, when starting your component with `wash`, you can supply the configuration using the `--config` flag:

```bash
# wash start component <component_ref> <component_id> --config <config-name>
wash start component wasmcloud.azurecr.io/http-hello-world:0.1.0 hello --config custom-config
```

    </TabItem>

</Tabs>

## Using Configuration

:::info[Prerequisite]
To fetch the interface for runtime configuration, you'll need [wit-deps](https://github.com/bytecodealliance/wit-deps) installed.
:::

Components access configuration at runtime by using the [wasi-runtime-config](https://github.com/WebAssembly/wasi-runtime-config) interface. To use this interface, you'll need to add it to your WIT dependencies, and then import the `wasi:config/runtime` interface in your component.

In your `wit/deps.toml`:

```toml
config = "https://github.com/WebAssembly/wasi-runtime-config/archive/main.tar.gz"
```

Then, update your dependencies to fetch the interface:

```bash
wit-deps update
```

Lastly, update your component to import the `wasi:config/runtime` interface inside of your `wit/world.wit` file. This may be named differently depending on your component, but the interface should be imported in the same way.

```wit
package wasmcloud:hello;

world hello {
    import wasi:config/runtime@0.2.0-draft;
}
```

Now, you can fetch the configuration inside of your component using the runtime configuration interface.

<Tabs groupId="lang" queryString>
    <TabItem value="rust" label="Rust" default>

```rust
let log_level = wasi::config::runtime::get("log-level")
    .expect("Unable to fetch value")
    .unwrap_or_else(|| "config value not set".to_string());

assert_eq!(log_level, "debug");
```

    </TabItem>
    <TabItem value="tinygo" label="TinyGo">

```go
import (
	"fmt"

	gen "github.com/wasmcloud/wasmcloud/examples/golang/components/http-hello-world/gen"
)

// ...elided

logLevel := gen.WasiConfig0_2_0_draft_RuntimeGet("log-level").Unwrap().Unwrap()
// Prints "debug"
fmt.Println("%s", logLevel);
```

    </TabItem>
    <TabItem value="typescript" label="TypeScript">

```typescript
//@ts-expect-error -- these types aren't currently generated by JCO
import { Get } from 'wasi:config/runtime@0.2.0-draft';

// ...
const logLevel = Get('log-level');
// Prints "Log level is: debug"
console.log(`Log level is: ${logLevel}`);
```

    </TabItem>
    <TabItem value="python" label="Python">

```python
# Replace `hello` with the name of your WIT world
from hello.imports.runtime import (get)

# ...

logLevel = get("log-level")
# Prints "Log level: debug"
print("Log level: {logLevel}")
```

    </TabItem>
    <TabItem value="unlisted" label="My Language Isn't Listed">

If your language supports bindings generation (either via [wit-bindgen](https://github.com/bytecodealliance/wit-bindgen) or other tool) you can use the `wasi:config/runtime` interface to get configuration. Follow the bindings generation documentation in order to call the `wasi:config/runtime.get` function, and supply the name of the configuration property to fetch, e.g. `log-level` to retrieve `debug` in the above example.

    </TabItem>

</Tabs>
