<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Deploying wasmCloud Actors from Github Packages | wasmCloud</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://wasmcloud.com/blog/2022-05-23_ghcr-actions"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Deploying wasmCloud Actors from Github Packages | wasmCloud"><meta data-rh="true" name="description" content="Simplifying the deployment experience for WebAssembly modules."><meta data-rh="true" property="og:description" content="Simplifying the deployment experience for WebAssembly modules."><meta data-rh="true" property="og:image" content="https://wasmcloud.com/img/ghcr-actions/github-packages.png"><meta data-rh="true" name="twitter:image" content="https://wasmcloud.com/img/ghcr-actions/github-packages.png"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2022-05-23T13:00:00.000Z"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://wasmcloud.com/blog/2022-05-23_ghcr-actions"><link data-rh="true" rel="alternate" href="https://wasmcloud.com/blog/2022-05-23_ghcr-actions" hreflang="en"><link data-rh="true" rel="alternate" href="https://wasmcloud.com/blog/2022-05-23_ghcr-actions" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="wasmCloud RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="wasmCloud Atom Feed">




<link rel="alternate" type="application/rss+xml" href="/community/rss.xml" title="wasmCloud RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/community/atom.xml" title="wasmCloud Atom Feed"><link rel="stylesheet" href="/assets/css/styles.17e61a64.css">
<link rel="preload" href="/assets/js/runtime~main.f36a1cdc.js" as="script">
<link rel="preload" href="/assets/js/main.57f130ad.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/wasmcloud_green.svg" alt="wasmCloud Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/wasmcloud_green.svg" alt="wasmCloud Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">wasmCloud</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/community">Community</a><a class="navbar__item navbar__link" href="/docs/intro">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wasmcloud" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/globally_distributed_webassembly_applications_with_wasmcloud_and_nats">Globally Distributed WebAssembly Applications with wasmCloud and NATS</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/balancing_nfr_coupling">Using Capabilities to Decouple Non-Functional Requirements</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/road_to_ubiquity">WebAssembly and the Road to Ubiquity</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/wasmcloud_third_anniversary">Reflections on Three Years of wasmCloud</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/webassembly_components_and_wasmcloud_actors_a_glimpse_of_the_future">WebAssembly Components and wasmCloud Actors: A Glimpse of the Future</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/example_creating_webassembly_actor_in_go_with_tinygo">Building Portable, Scalable Components with TinyGo and wasmCloud</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/caps_are_effects">wasmCloud Capabilities are Managed Algebraic Effects for WebAssembly Functions</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/2022-05-23_ghcr-actions">Deploying wasmCloud Actors from Github Packages</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="image" content="https://wasmcloud.com/img/ghcr-actions/github-packages.png"><header><h1 class="title_f1Hy" itemprop="headline">Deploying wasmCloud Actors from Github Packages</h1><div class="container_mt6G margin-vert--md"><time datetime="2022-05-23T13:00:00.000Z" itemprop="datePublished">May 23, 2022</time> Â· <!-- -->6 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">Brooks Townsend</span></div></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p><img loading="lazy" alt="github-packages-logo" src="/assets/images/github-packages-a2ea3a52ed3e00db8f2f7291888cafaa.png" width="1203" height="633" class="img_ev3q"></p><p>With the general availability of GitHub Packages container registry, or GHCR for short, an easily accessible Docker registry made its way into the same platform many developers use for version control today. This was great news for containers and simplifying infrastructure, just like Actions greatly simplified workflows on GitHub.</p><p>But wait, there&#x27;s more!</p><p>GitHub container registry also supports the Open Container Initiative (OCI) specification, which doesn&#x27;t limit &quot;containers&quot; to just Docker containers, and it supports public anonymous downloads! This makes GHCR a perfect target for hosting OCI-compliant artifacts, like wasmCloud actors and capability providers. Today, we&#x27;re going to walk through evolving use cases for getting more power out of this feature of GitHub and how it can simplify your wasmCloud development beyond running on your local machine.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">â</a></h2><p>Today we&#x27;ll be using a couple of tools for this tutorial:</p><ul><li>A <u><a href="https://www.rust-lang.org/tools/install" target="_blank" rel="noopener noreferrer">Rust</a></u> toolchain to build actors<ul><li>Make sure to add wasm32 as a target with <code>rustup target add wasm32-unknown-unknown</code></li></ul></li><li>.<u><a href="https://wasmcloud.dev/overview/installation/#install-wash" target="_blank" rel="noopener noreferrer">wash</a></u>, the wasmCloud shell, at least <code>v0.11.0</code></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pushing-an-actor-to-github-packages">Pushing an actor to GitHub packages<a class="hash-link" href="#pushing-an-actor-to-github-packages" title="Direct link to heading">â</a></h2><p>To start, let&#x27;s go ahead and generate a new wasmCloud actor project from the <code>hello</code> project template. This is our &quot;hello world&quot; actor.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wash new actor hello</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once the project is generated, <code>cd hello</code> into the project. There, you can run <code>cargo build --release</code> build your actor module. The last step before we can push it to GitHub is to <u><a href="https://wasmcloud.dev/app-dev/std-caps/#sign-the-actor" target="_blank" rel="noopener noreferrer">sign</a></u> the actor with embedded claims. The following command will sign your actor and allow it to access the HTTPServer capability:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wash claims sign target/wasm32-unknown-unknown/release/hello.wasm --http_server --name Hello</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>By default this will place the actor under the same directory with a <code>_s</code> suffix, and you can verify this worked properly by running:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wash claims inspect target/wasm32-unknown-unknown/release/hello_s.wasm</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Your output should be something like this, just with different <code>Account</code> and <code>Module</code> keys</p><div class="language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">                              Hello - Module</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Account       ABYFZKXEHQWJIMBKVAVG3Y5LGEBT3MQXRYVTQBF7RVHUIG62LUK3N5EQ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Module        MAMP52XKSBHNDMWK4OR4BZVBDQNNZQ5FXDXUAX7KIT7KNOKK2N3CCLZ2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Expires                                                          never</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Can Be Used                                                immediately</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Version                                                       None (0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Call Alias                                                   (Not set)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               Capabilities</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HTTP Server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                   Tags</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  None</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now that we&#x27;ve built and signed your actor, let&#x27;s push it to GitHub! To do this, you&#x27;ll need a <u><a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token" target="_blank" rel="noopener noreferrer">personal access token</a></u> with the <code>write:packages</code> capability. Refer to the link for instructions on how to create this personal access token, and feel free to tweak the other parameters to your liking.</p><p><img loading="lazy" src="/assets/images/new-pat-decf93e4c9d618db626b80586bb8a90e.png" width="1720" height="1392" class="img_ev3q"></p><p>Once created, copy this token and store it in a safe place before moving back to your terminal.</p><p><img loading="lazy" src="/assets/images/pat-created-9cc806bae6e55bbd45e53aa941378c6c.png" width="1732" height="502" class="img_ev3q"></p><p>Now, time to push! We&#x27;ll use <code>wash</code> here along with some environment variables. <code>WASH_REG_USER</code> should be set to your GitHub username, and <code>WASH_REG_PASSWORD</code> should be set to your GitHub personal access token that you created before, starting with <code>ghp_</code></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">WASH_REG_USER</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">your_github_username</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">WASH_REG_PASSWORD</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">your_gitub_personal_access_token</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wash reg push ghcr.io/</span><span class="token variable" style="color:#36acaa">$WASH_REG_USER</span><span class="token plain">/hello:0.1.0 target/wasm32-unknown-unknown/release/hello_s.wasm</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should see output like the following:</p><div class="language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wash reg push ghcr.io/$WASH_REG_USER/hello:0.1.0 target/wasm32-unknown-unknown/release/hello_s.wasm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ð¿ Successfully validated and pushed to ghcr.io/brooksmtownsend/hello:0.1.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now, you can navigate to your GitHub profile and access the <code>Packages</code> tab to see your <code>hello</code> actor.</p><p><img loading="lazy" src="/assets/images/package-21622403a62a48bd805ec847e43e7da6.png" width="2056" height="574" class="img_ev3q"></p><p>By default, our actor package is private so that it cannot be downloaded anonymously. Any wasmCloud host can be configured with a username and password for registry authentication, and in this case you can supply your GitHub username and personal access token to authenticate and download your actor. However, this step can be missed easily, so let&#x27;s make this actor package public so you can start it anywhere. Click on your package, then on the &quot;<a href="https://emojipedia.org/gear/" target="_blank" rel="noopener noreferrer">âï¸</a> Package Settings&quot; sidebar. From there, scroll to the bottom and &quot;Change visibility&quot; to public.</p><p><img loading="lazy" src="/assets/images/change-visibility-ec2677df4d134329e9fd44b43ada1f11.png" width="988" height="782" class="img_ev3q"></p><p>Now you can download and run that actor on any wasmCloud host, which can be on Mac, Linux, Windows, or even in a browser tab! You can test connectivity at any time by running:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wash claims inspect ghcr.io/</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">your_github_username</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">/hello:0.1.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="continuous-integration-with-a-github-repository">Continuous integration with a GitHub repository<a class="hash-link" href="#continuous-integration-with-a-github-repository" title="Direct link to heading">â</a></h2><p>Now that we have a Package set up for our actor, the next step is to connect it to a repository. Once we do that we can take advantage of the built-in Actions that are provided with an actor project to automatically build, test, and release actors.</p><p>First step is to create a GitHub repository. For simplicity, let&#x27;s call it <code>hello</code> to match the actor name.</p><p><img loading="lazy" src="/assets/images/create-repo-fda05baf6274b48407e55d6f24763419.png" width="1604" height="1628" class="img_ev3q"></p><p>Once that&#x27;s created, we need to associate our local actor project with the GitHub repository. <code>cd hello</code> into your actor project if you haven&#x27;t already, and then:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> commit -m </span><span class="token string" style="color:#e3116c">&quot;initial commit&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> branch -M main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># If you named your repository something else, simply replace the URL below</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> remote </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> origin https://github.com/</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">your_github_name</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">/hello.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> push -u origin main</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For every commit after this one, and every pull request into <code>main</code> , your actor will be automatically built, checked for formatting, lints, and tested once you add unit tests and uncomment the <code>cargo test</code> step in <code>.github/workflows/build.yml</code>.</p><p>For the <code>.github/workflows/release.yml</code> action, we need to configure three repository secrets to properly sign and release your actor. The good news is, we already have all of these secrets, we just need to plop them in GitHub!</p><p><img loading="lazy" src="/assets/images/repo-secrets-0bfb27c1410e8fc88645b31b25a985d4.png" width="2680" height="1458" class="img_ev3q"></p><p>Under your repository settings, head to the <code>Secrets</code> dropdown and click <code>Actions</code> . Here we can configure the following secrets for use in this repository.</p><table><thead><tr><th><strong>name</strong></th><th><strong>value</strong></th></tr></thead><tbody><tr><td>WASH_ISSUER_KEY</td><td>Can be found under <code>$HOME/.wash/keys</code> with the form of <code>&lt;your_username&gt;_account.nk</code>. Copy the contents of this file, a 56 character <u><a href="https://docs.nats.io/running-a-nats-service/configuration/securing_nats/auth_intro/nkey_auth" target="_blank" rel="noopener noreferrer">NKey</a></u> starting with <code>SA</code>, into the value section.</td></tr><tr><td>WASH_SUBJECT_KEY</td><td>Can be found under <code>$HOME/.wash/keys/hello_module.nk</code>. Copy the contents of this file, a 56 character <u><a href="https://docs.nats.io/running-a-nats-service/configuration/securing_nats/auth_intro/nkey_auth" target="_blank" rel="noopener noreferrer">NKey</a></u> starting with <code>SM</code>, into the value section.</td></tr><tr><td>WASMCLOUD_PAT</td><td>Your personal access token that you previously used for <code>WASH_REG_PASSWORD</code></td></tr></tbody></table><p><img loading="lazy" src="/assets/images/required-secrets-d314cf96d604bb5d9c491ec86c9f4291.png" width="1712" height="538" class="img_ev3q"></p><p>Once these three secrets are configured, let&#x27;s cut our first release of the <code>hello</code> actor. Head back to your command line and create a tag for <code>v0.1.0</code> and push it to <code>main</code></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> tag -a v0.1.0 -m </span><span class="token string" style="color:#e3116c">&quot;initial release for hello actor&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> push -u origin v0.1.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will automatically kick off the release action, which includes building and testing the actor just like the build action, and after a few minutes you&#x27;ll see a new GitHub release created with the OCI URL for the actor and claims information, as well as the <code>hello</code> package associated with this repo.</p><p><img loading="lazy" src="/assets/images/release-b19d34e08b6c7f78f1e96906eaf1d865.png" width="2844" height="1878" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="wrap-up">Wrap up<a class="hash-link" href="#wrap-up" title="Direct link to heading">â</a></h2><p>Today we walked through the setup process to configure a GitHub repository to automatically build, test, and release wasmCloud actors to GitHub Packages. You can continue to add to these base workflow templates to include your own custom checks as well.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-next">What&#x27;s next?<a class="hash-link" href="#whats-next" title="Direct link to heading">â</a></h2><p>Now that your <code>hello</code> actor is published to a public OCI registry, you can follow our <u><a href="https://wasmcloud.dev/app-dev/create-actor/run/" target="_blank" rel="noopener noreferrer">run actor</a></u> tutorial with the OCI reference instead of uploading a local file. If you&#x27;re new to wasmCloud, check out our documentation for helpful information about <u><a href="https://wasmcloud.dev/reference/host-runtime/actors/" target="_blank" rel="noopener noreferrer">actors</a></u>, our <u><a href="https://wasmcloud.dev/reference/host-runtime/security/" target="_blank" rel="noopener noreferrer">security model</a></u>, and more. Feedback on this process is welcome and encouraged on our <u><a href="https://github.com/wasmcloud/project-templates" target="_blank" rel="noopener noreferrer">project-templates</a></u> repo; and to stay involved you can join our <u><a href="https://slack.wasmcloud.com/" target="_blank" rel="noopener noreferrer">slack</a></u>.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/caps_are_effects"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">wasmCloud Capabilities are Managed Algebraic Effects for WebAssembly Functions</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#pushing-an-actor-to-github-packages" class="table-of-contents__link toc-highlight">Pushing an actor to GitHub packages</a></li><li><a href="#continuous-integration-with-a-github-repository" class="table-of-contents__link toc-highlight">Continuous integration with a GitHub repository</a></li><li><a href="#wrap-up" class="table-of-contents__link toc-highlight">Wrap up</a></li><li><a href="#whats-next" class="table-of-contents__link toc-highlight">What&#39;s next?</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/wasmcloud/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://slack.wasmcloud.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://calendar.google.com/calendar/u/0/embed?src=c_6cm5hud8evuns4pe5ggu3h9qrs@group.calendar.google.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Calendar &amp; wasmCloud Wednesdays<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/community">Community Meeting Notes</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social &amp; More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/wasmcloud" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/wasmCloud/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/privacy-policy">Privacy Policy</a></li><li class="footer__item"><a class="footer__link-item" href="/terms-conditions">Terms and Conditions</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 wasmCloud LLC. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our Trademark Usage page: https://www.linuxfoundation.org/trademark-usage. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.f36a1cdc.js"></script>
<script src="/assets/js/main.57f130ad.js"></script>
</body>
</html>